<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dettaglio Vulcano</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f7f7f7;
    }
    #dettagli {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 600px;
    }
    h1 {
      margin-top: 0;
      color: #333;
    }
    p {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div id="dettagli">Caricamento...</div>

  <script>
    let vulcani;

    // Recupera ID (nome vulcano) dalla query string
    const params = new URLSearchParams(window.location.search);
    const vulcanoId = params.get('id');

    function preload() {
      // Carica CSV usando p5.js
      vulcani = loadTable('assets/dataset.csv', 'csv', 'header', mostraVulcano);
    }

    function setup() {
      // p5.js richiede setup, anche vuoto
    }

    function mostraVulcano() {
      // Trova il vulcano corrispondente
      let row = null;
      for (let i = 0; i < vulcani.getRowCount(); i++) {
        if (vulcani.getString(i, "Volcano Name") === vulcanoId) {
          row = vulcani.getRow(i);
          break;
        }
      }

      const div = document.getElementById('dettagli');

      if (row) {
        div.innerHTML = `
          <h1>${row.getString("Volcano Name")}</h1>
          <p><strong>Numero del Vulcano:</strong> ${row.getNUm("Volcano Number")}</p>
          <p><strong>Paese:</strong> ${row.getString("Country")}</p>
          <p><strong>Location:</strong> ${row.getNum("Location")}</p>
          <p><strong>Latitudine:</strong> ${row.getNum("Latitude")}</p>
          <p><strong>Longitudine:</strong> ${row.getString("Longitude")}</p>
          <p><strong>Altezza:</strong> ${row.getString("Elevation (m)") || "Non disponibile"} m</p>
          <p><strong>Tipologia:</strong> ${row.getString("Type")}</p>
          <p><strong>Categoria:</strong> ${row.getString("TypeCategory")}</p>
          <p><strong>Stato:</strong> ${row.getString("Status")}</p>
          <p><strong>Ultima eruzione conosciuta:</strong> ${row.getString("Last Known Eruption")}</p>
          
          
        
         
        `;
      } else {
        div.innerHTML = "<p>Vulcano non trovato.</p>";
      }
    }

    preload(); // Avvia caricamento CSV
  </script>
</body>
</html>
